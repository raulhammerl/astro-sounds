<button id="theme-toggle" aria-label="Toggle dark mode">
  <span class="light-text">Light Mode</span>
  <span class="dark-text">Dark Mode</span>
</button>

<style>
  /* Base button styling */
  #theme-toggle {
    padding: 0.5rem 1rem;
    cursor: pointer;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    background: var(--bg-secondary);
    color: var(--text-color);
  }

  /* Logic to show/hide text based on the theme */
  .light-text, :global([data-theme='dark']) .dark-text {
    display: none;
  }
  
  :global([data-theme='dark']) .light-text, .dark-text {
    display: inline-block;
  }
</style>

<script>
  const toggle = document.getElementById("theme-toggle");
  const systemSettingDark = window.matchMedia("(prefers-color-scheme: dark)");

  const updateThemeOnHtml = (theme) => {
    document.documentElement.setAttribute("data-theme", theme);
    localStorage.setItem("theme", theme);
  };

  // 1. Handle Click
  toggle?.addEventListener("click", () => {
    const currentTheme = document.documentElement.getAttribute("data-theme");
    const newTheme = currentTheme === "dark" ? "light" : "dark";
    updateThemeOnHtml(newTheme);
  });

  // 2. Your "Smart" System Listener (The part you liked!)
  systemSettingDark.addEventListener("change", (e) => {
    // Only switch automatically if the user hasn't set a manual override
    // Or, remove the check if you want it to always follow the system
    const newTheme = e.matches ? "dark" : "light";
    updateThemeOnHtml(newTheme);
  });
</script>
